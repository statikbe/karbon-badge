!function(){"use strict";!function(){const n="https://netzero.ddev.site/api/v1/carbon",e=864e5,t="netzero-badge",o="netzero_",r=n=>document.getElementById(n),i=()=>encodeURIComponent(window.location.href),a=()=>o+i(),s=async(e=!0)=>{try{const t=await fetch(`${n}?url=${i()}`);if(!t.ok)throw new Error(`API error: ${t.status}`);const o=await t.json();e&&d(o.data);const r={...o.data,cachedAt:Date.now()};localStorage.setItem(a(),JSON.stringify(r))}catch(t){r("netzero-result").innerHTML="Data unavailable",localStorage.removeItem(a())}},d=n=>{const e=r("netzero-result"),t=r("netzero-rating");if(e.innerHTML=`${n.co2_grams}g of CO<sub>2</sub>/view`,t.innerHTML=`Rating: <strong>${n.co2_rating}</strong>`,n.project){const e=r("netzero-project");e&&(e.innerHTML=`Project: ${n.project.name}`)}},c=()=>{if(!("fetch"in window))return;const n=r(t);if(!n)return;n.insertAdjacentHTML("beforeend","\n    <style>\n      #netzero-badge {\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n        font-size: 15px;\n        text-align: center;\n        line-height: 1.15;\n        margin: 1em 0;\n      }\n\n      #netzero-badge sub {\n        vertical-align: middle;\n        font-size: 0.7em;\n      }\n\n      .netzero-container {\n        display: inline-flex;\n        border-radius: 0.5em;\n        overflow: hidden;\n        box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n      }\n\n      #netzero-result {\n        padding: 0.5em 1em;\n        background: #ffffff;\n        border: 2px solid #10b981;\n        border-right: none;\n        min-width: 10em;\n      }\n\n      #netzero-link {\n        padding: 0.5em 1em;\n        background: #10b981;\n        color: #ffffff;\n        text-decoration: none;\n        font-weight: 600;\n        border: 2px solid #10b981;\n        transition: background 0.2s;\n      }\n\n      #netzero-link:hover {\n        background: #059669;\n      }\n\n      #netzero-rating {\n        margin-top: 0.5em;\n        font-size: 0.9em;\n        color: #666;\n      }\n    </style>\n  "),n.insertAdjacentHTML("beforeend",'\n    <div class="netzero-container">\n      <span id="netzero-result">Measuring CO<sub>2</sub>&hellip;</span>\n      <a id="netzero-link" href="https://netzero.ddev.site" target="_blank" rel="noopener">\n        NetZero\n      </a>\n    </div>\n    <div id="netzero-rating">&nbsp;</div>\n    <div id="netzero-project"></div>\n  ');const o=localStorage.getItem(a()),i=Date.now();if(o)try{const n=JSON.parse(o);d(n),i-n.cachedAt>e&&s(!1)}catch(c){s()}else s()};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",c):c()}()}();
